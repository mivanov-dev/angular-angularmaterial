<div fxLayoutAlign="center center"
     class="container">

    <div fxLayoutGap="10px"
         fxLayout="column"
         fxLayoutAlign="center center">

        <ng-template #alertContainer></ng-template>

        <div>
            <mat-card fxFlex="350px"
                      fxFlex.xs="300px">

                <mat-card-header fxLayout="row"
                                 fxLayoutAlign="center center">

                    <mat-card-title>
                        Reset password
                    </mat-card-title>
                </mat-card-header>

                <mat-card-content>
                    <form [formGroup]="form"
                          (ngSubmit)="onSubmit()">

                        <div formGroupName="user">
                            <mat-form-field fxLayout="column"
                                            appearance="outline">
                                <mat-label>New Password</mat-label>
                                <input #password
                                       [type]="hidePassword ? 'password' : 'text'"
                                       name="password"
                                       matInput
                                       formControlName="password"
                                       autocomplete="off"
                                       required>
                                <a mat-icon-button
                                   matSuffix
                                   (click)="hidePassword = !hidePassword"
                                   [attr.aria-label]="'hide'"
                                   [attr.aria-pressed]="hidePassword">
                                    <mat-icon>{{ hidePassword ? 'visibility_off' : 'visibility' }}</mat-icon>
                                </a>
                                <mat-error *ngIf="hasPasswordControlErrorRequired(passwordControl)">
                                    Password is <strong>required</strong> !
                                </mat-error>
                                <mat-error *ngIf="hasControlErrorLengtgh(passwordControl)">
                                    Password length must be between 10 and 100 characters!
                                </mat-error>
                            </mat-form-field>

                            <mat-form-field fxLayout="column"
                                            appearance="outline">
                                <mat-label>Repeate New Password</mat-label>
                                <input #repeatedPassword
                                       [type]="hideRepeatedPassword ? 'password' : 'text'"
                                       matInput
                                       formControlName="repeatedPassword"
                                       appConfirmEqualValidator="password"
                                       autocomplete="off"
                                       required>
                                <a mat-icon-button
                                   matSuffix
                                   (click)="hideRepeatedPassword = !hideRepeatedPassword"
                                   [attr.aria-label]="'hide'"
                                   [attr.aria-pressed]="hideRepeatedPassword">
                                    <mat-icon>{{ hideRepeatedPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
                                </a>
                                <mat-error *ngIf="hasPasswordControlErrorRequired(repeatedPasswordControl)">
                                    Repeated password is <strong>required</strong> !
                                </mat-error>
                                <mat-error *ngIf="hasControlErrorLengtgh(repeatedPasswordControl)">
                                    Repeated password length must be between 10 and 100 characters!
                                </mat-error>
                                <mat-error *ngIf="repeatedPasswordControl?.errors?.notEqual">
                                    Repeated password do not match!
                                </mat-error>
                            </mat-form-field>
                        </div>
                        <button mat-raised-button
                                type="submit"
                                #submitButton
                                style="display: none;">
                        </button>
                    </form>
                </mat-card-content>
                <mat-card-actions fxLayout="column">

                    <button mat-raised-button
                            (click)="onTriggerClick()"
                            fxLayout="column"
                            fxLayoutAlign="center stretch"
                            color="primary"
                            [disabled]="(isLoading$ | async)">
                        Send&nbsp;
                        <i class="fas fa-cog fa-spin"
                           *ngIf="(isLoading$ | async)"></i>
                    </button>
                </mat-card-actions>
                <mat-card-footer fxLayout="column"
                                 fxLayoutAlign="center center">
                    <a mat-button
                       color="primary"
                       [routerLink]="['/user/auth']">
                        Login
                    </a>
                </mat-card-footer>
            </mat-card>
        </div>
    </div>
</div>